var Input=function(){"use strict";var e=0;var t=1;var s=2;var o=3;var n=null;var i=function i(u,r){var l=this;r=r||{};if(!n&&r.useMask){n=document.createElement("div");n.classList.add("drag-mask");n.style.position="fixed";n.style.zIndex="9999";n.style.top="0";n.style.right="0";n.style.bottom="0";n.style.left="0";n.oncontextmenu=function(){return false}}this._opts=r;this._element=u||document.body;this._lastTime=0;this._globalEventInstalled=false;this._pointerLocked=false;this._mouseGrabbed=false;this._bcr=u.getBoundingClientRect();this._mouse={x:0,y:0,dx:0,dy:0,prevX:0,prevY:0,scrollX:0,scrollY:0,left:e,right:e,middle:e};this._keyboard={};this._mousemoveHandle=function(e){e.preventDefault();e.stopPropagation();l._mouse.dx=e.movementX;l._mouse.dy=e.movementY;if(l._pointerLocked){l._mouse.x+=e.movementX;l._mouse.y+=e.movementY}else{l._mouse.x=e.clientX-l._bcr.left;l._mouse.y=e.clientY-l._bcr.top}};this._mousewheelHandle=function(e){e.preventDefault();e.stopPropagation();l._mouse.scrollX=e.deltaX;l._mouse.scrollY=e.deltaY};this._mousedownHandle=function(e){e.preventDefault();e.stopPropagation();if(l._opts.lock){l._lock(true)}l._installGlobalEvents();l._element.focus();switch(e.button){case 0:if(l._mouse.left!==s){l._mouse.left=t}break;case 1:if(l._mouse.middle!==s){l._mouse.middle=t}break;case 2:if(l._mouse.right!==s){l._mouse.right=t}break}};this._mouseupHandle=function(e){e.preventDefault();e.stopPropagation();l._mouse.dx=e.movementX;l._mouse.dy=e.movementY;l._mouse.prevX=l._mouse.x=e.clientX-l._bcr.left;l._mouse.prevX=l._mouse.y=e.clientY-l._bcr.top;switch(e.button){case 0:l._mouse.left=o;break;case 1:l._mouse.middle=o;break;case 2:l._mouse.right=o;break}};this._mouseenterHandle=function(e){e.preventDefault();e.stopPropagation();l._mouse.dx=0;l._mouse.dy=0;l._mouse.prevX=l._mouse.x=e.clientX-l._bcr.left;l._mouse.prevX=l._mouse.y=e.clientY-l._bcr.top};this._mouseleaveHandle=function(e){e.preventDefault();e.stopPropagation();if(l._mouseGrabbed){return}l._uninstallGlobalEvents();l._mouse.dx=e.movementX;l._mouse.dy=e.movementY;l._mouse.prevX=l._mouse.x=e.clientX-l._bcr.left;l._mouse.prevX=l._mouse.y=e.clientY-l._bcr.top};this._keydownHandle=function(e){e.stopPropagation();if(l._keyboard[e.key]!==s){l._keyboard[e.key]=t}};this._keyupHandle=function(e){e.stopPropagation();l._keyboard[e.key]=o};this._contextmenuHandle=function(e){e.preventDefault();e.stopPropagation()};this._registerEvents()};var u={mouseX:{},mouseY:{},mouseDeltaX:{},mouseDeltaY:{},mouseScrollX:{},mouseScrollY:{}};i.prototype.destroy=function e(){this._element.removeEventListener("mousedown",this._mousedownHandle);this._element.removeEventListener("mouseenter",this._mouseenterHandle);this._element.removeEventListener("mouseleave",this._mouseleaveHandle);this._element.removeEventListener("mousemove",this._mousemoveHandle);this._element.removeEventListener("mousewheel",this._mousewheelHandle,{passive:true});this._element.removeEventListener("keydown",this._keydownHandle);this._element.removeEventListener("keyup",this._keyupHandle);this._element.removeEventListener("contextmenu",this._contextmenuHandle);this._uninstallGlobalEvents()};i.prototype._registerEvents=function e(){this._element.addEventListener("mousedown",this._mousedownHandle);this._element.addEventListener("mouseenter",this._mouseenterHandle);this._element.addEventListener("mouseleave",this._mouseleaveHandle);this._element.addEventListener("mousemove",this._mousemoveHandle);this._element.addEventListener("mousewheel",this._mousewheelHandle,{passive:false});this._element.addEventListener("keydown",this._keydownHandle);this._element.addEventListener("keyup",this._keyupHandle);this._element.addEventListener("contextmenu",this._contextmenuHandle)};i.prototype._installGlobalEvents=function e(){if(this._globalEventInstalled){return}document.addEventListener("mouseup",this._mouseupHandle);document.addEventListener("mousemove",this._mousemoveHandle);document.addEventListener("mousewheel",this._mousewheelHandle,{passive:true});if(this._opts.useMask){n.style.cursor=this._opts.maskCursor||"default";document.body.appendChild(n)}this._globalEventInstalled=true};i.prototype._uninstallGlobalEvents=function t(){if(!this._globalEventInstalled){return}if(this._mouse.left!==e&&this._mouse.left!==o||this._mouse.right!==e&&this._mouse.right!==o||this._mouse.middle!==e&&this._mouse.middle!==o){return}this._lock(false);if(this._mouseGrabbed){return}document.removeEventListener("mouseup",this._mouseupHandle);document.removeEventListener("mousemove",this._mousemoveHandle);document.removeEventListener("mousewheel",this._mousewheelHandle,{passive:true});if(this._opts.useMask){n.remove()}this._globalEventInstalled=false};i.prototype._lock=function e(t){if(t){if(this._pointerLocked){return}if(this._element.requestPointerLock){this._element.requestPointerLock();this._pointerLocked=true}return}else{if(!this._pointerLocked){return}if(document.exitPointerLock){document.exitPointerLock();this._pointerLocked=false}}};u.mouseX.get=function(){return this._mouse.x};u.mouseY.get=function(){return this._mouse.y};u.mouseDeltaX.get=function(){return this._mouse.dx};u.mouseDeltaY.get=function(){return this._mouse.dy};u.mouseScrollX.get=function(){return this._mouse.scrollX};u.mouseScrollY.get=function(){return this._mouse.scrollY};i.prototype.reset=function n(){var i=this;this._mouse.prevX=this._mouse.x;this._mouse.prevY=this._mouse.y;this._mouse.dx=0;this._mouse.dy=0;this._mouse.scrollX=0;this._mouse.scrollY=0;if(this._mouse.left===t){this._mouse.left=s}else if(this._mouse.left===o){this._mouse.left=e}if(this._mouse.middle===t){this._mouse.middle=s}else if(this._mouse.middle===o){this._mouse.middle=e}if(this._mouse.right===t){this._mouse.right=s}else if(this._mouse.right===o){this._mouse.right=e}for(var u in i._keyboard){var r=i._keyboard[u];if(r===t){i._keyboard[u]=s}else if(r===o){i._keyboard[u]=e}}this._uninstallGlobalEvents()};i.prototype.resize=function e(){this._bcr=this._element.getBoundingClientRect()};i.prototype.grabMouse=function e(t){this._mouseGrabbed=t;if(t){this._installGlobalEvents()}else{this._uninstallGlobalEvents()}};i.prototype.mousedown=function e(s){var o=this._mouse[s];if(o!==undefined){return o===t}return false};i.prototype.mousepress=function e(o){var n=this._mouse[o];if(n!==undefined){return n===t||n===s}return false};i.prototype.mouseup=function e(t){var s=this._mouse[t];if(s!==undefined){return s===o}return false};i.prototype.keydown=function e(s){return this._keyboard[s]===t};i.prototype.keyup=function e(t){return this._keyboard[t]===o};i.prototype.keypress=function e(o){return this._keyboard[o]===t||this._keyboard[o]===s};Object.defineProperties(i.prototype,u);return i}();
//# sourceMappingURL=input.min.js.map