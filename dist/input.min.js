var Input=function(){"use strict";const e=0;const t=1;const s=2;const i=3;let n=null;class o{constructor(o,u){u=u||{};if(!n&&u.useMask){n=document.createElement("div");n.classList.add("drag-mask");n.style.position="fixed";n.style.zIndex="9999";n.style.top="0";n.style.right="0";n.style.bottom="0";n.style.left="0";n.oncontextmenu=function(){return false}}this._opts=u;this._element=o||document.body;this._lastTime=0;this._globalEventInstalled=false;this._pointerLocked=false;this._mouseGrabbed=false;this._bcr=o.getBoundingClientRect();this._mouse={x:0,y:0,dx:0,dy:0,prevX:0,prevY:0,scrollX:0,scrollY:0,left:e,right:e,middle:e};this._keyboard={};this._mousemoveHandle=(e=>{e.preventDefault();e.stopPropagation();this._mouse.dx=e.movementX;this._mouse.dy=e.movementY;if(this._pointerLocked){this._mouse.x+=e.movementX;this._mouse.y+=e.movementY}else{this._mouse.x=e.clientX-this._bcr.left;this._mouse.y=e.clientY-this._bcr.top}});this._mousewheelHandle=(e=>{e.preventDefault();e.stopPropagation();this._mouse.scrollX=e.deltaX;this._mouse.scrollY=e.deltaY});this._mousedownHandle=(e=>{e.preventDefault();e.stopPropagation();if(this._opts.lock){this._lock(true)}this._installGlobalEvents();this._element.focus();switch(e.button){case 0:if(this._mouse.left!==s){this._mouse.left=t}break;case 1:if(this._mouse.middle!==s){this._mouse.middle=t}break;case 2:if(this._mouse.right!==s){this._mouse.right=t}break}});this._mouseupHandle=(e=>{e.preventDefault();e.stopPropagation();this._mouse.dx=e.movementX;this._mouse.dy=e.movementY;this._mouse.prevX=this._mouse.x=e.clientX-this._bcr.left;this._mouse.prevX=this._mouse.y=e.clientY-this._bcr.top;switch(e.button){case 0:this._mouse.left=i;break;case 1:this._mouse.middle=i;break;case 2:this._mouse.right=i;break}});this._mouseenterHandle=(e=>{e.preventDefault();e.stopPropagation();this._mouse.dx=0;this._mouse.dy=0;this._mouse.prevX=this._mouse.x=e.clientX-this._bcr.left;this._mouse.prevX=this._mouse.y=e.clientY-this._bcr.top});this._mouseleaveHandle=(e=>{e.preventDefault();e.stopPropagation();if(this._mouseGrabbed){return}this._uninstallGlobalEvents();this._mouse.dx=e.movementX;this._mouse.dy=e.movementY;this._mouse.prevX=this._mouse.x=e.clientX-this._bcr.left;this._mouse.prevX=this._mouse.y=e.clientY-this._bcr.top});this._keydownHandle=(e=>{e.stopPropagation();if(this._keyboard[e.key]!==s){this._keyboard[e.key]=t}});this._keyupHandle=(e=>{e.stopPropagation();this._keyboard[e.key]=i});this._contextmenuHandle=(e=>{e.preventDefault();e.stopPropagation()});this._registerEvents()}destroy(){this._element.removeEventListener("mousedown",this._mousedownHandle);this._element.removeEventListener("mouseenter",this._mouseenterHandle);this._element.removeEventListener("mouseleave",this._mouseleaveHandle);this._element.removeEventListener("mousemove",this._mousemoveHandle);this._element.removeEventListener("mousewheel",this._mousewheelHandle);this._element.removeEventListener("keydown",this._keydownHandle);this._element.removeEventListener("keyup",this._keyupHandle);this._element.removeEventListener("contextmenu",this._contextmenuHandle);this._uninstallGlobalEvents()}_registerEvents(){this._element.addEventListener("mousedown",this._mousedownHandle);this._element.addEventListener("mouseenter",this._mouseenterHandle);this._element.addEventListener("mouseleave",this._mouseleaveHandle);this._element.addEventListener("mousemove",this._mousemoveHandle);this._element.addEventListener("mousewheel",this._mousewheelHandle);this._element.addEventListener("keydown",this._keydownHandle);this._element.addEventListener("keyup",this._keyupHandle);this._element.addEventListener("contextmenu",this._contextmenuHandle)}_installGlobalEvents(){if(this._globalEventInstalled){return}document.addEventListener("mouseup",this._mouseupHandle);document.addEventListener("mousemove",this._mousemoveHandle);document.addEventListener("mousewheel",this._mousewheelHandle,{passive:true});if(this._opts.useMask){n.style.cursor=this._opts.maskCursor||"default";document.body.appendChild(n)}this._globalEventInstalled=true}_uninstallGlobalEvents(){if(!this._globalEventInstalled){return}if(this._mouse.left!==e&&this._mouse.left!==i||this._mouse.right!==e&&this._mouse.right!==i||this._mouse.middle!==e&&this._mouse.middle!==i){return}this._lock(false);if(this._mouseGrabbed){return}document.removeEventListener("mouseup",this._mouseupHandle);document.removeEventListener("mousemove",this._mousemoveHandle);document.removeEventListener("mousewheel",this._mousewheelHandle,{passive:true});if(this._opts.useMask){n.remove()}this._globalEventInstalled=false}_lock(e){if(e){if(this._pointerLocked){return}if(this._element.requestPointerLock){this._element.requestPointerLock();this._pointerLocked=true}return}else{if(!this._pointerLocked){return}if(document.exitPointerLock){document.exitPointerLock();this._pointerLocked=false}}}get mouseX(){return this._mouse.x}get mouseY(){return this._mouse.y}get mouseDeltaX(){return this._mouse.dx}get mouseDeltaY(){return this._mouse.dy}get mouseScrollX(){return this._mouse.scrollX}get mouseScrollY(){return this._mouse.scrollY}reset(){this._mouse.prevX=this._mouse.x;this._mouse.prevY=this._mouse.y;this._mouse.dx=0;this._mouse.dy=0;this._mouse.scrollX=0;this._mouse.scrollY=0;if(this._mouse.left===t){this._mouse.left=s}else if(this._mouse.left===i){this._mouse.left=e}if(this._mouse.middle===t){this._mouse.middle=s}else if(this._mouse.middle===i){this._mouse.middle=e}if(this._mouse.right===t){this._mouse.right=s}else if(this._mouse.right===i){this._mouse.right=e}for(let n in this._keyboard){let o=this._keyboard[n];if(o===t){this._keyboard[n]=s}else if(o===i){this._keyboard[n]=e}}this._uninstallGlobalEvents()}resize(){this._bcr=this._element.getBoundingClientRect()}grabMouse(e){this._mouseGrabbed=e;if(e){this._installGlobalEvents()}else{this._uninstallGlobalEvents()}}mousedown(e){let s=this._mouse[e];if(s!==undefined){return s===t}return false}mousepress(e){let i=this._mouse[e];if(i!==undefined){return i===t||i===s}return false}mouseup(e){let t=this._mouse[e];if(t!==undefined){return t===i}return false}keydown(e){return this._keyboard[e]===t}keyup(e){return this._keyboard[e]===i}keypress(e){return this._keyboard[e]===t||this._keyboard[e]===s}}return o}();
//# sourceMappingURL=input.min.js.map