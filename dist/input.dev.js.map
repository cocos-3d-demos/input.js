{"version":3,"file":"input.dev.js","sources":["../index.js"],"sourcesContent":["const KEY_NONE = 0;\nconst KEY_DOWN = 1;\nconst KEY_PRESSING = 2;\nconst KEY_UP = 3;\n\nlet _dragMask = null;\n\nexport default class Input {\n  /**\n   * @method constructor\n   * @param {HTMLElement} [element]\n   * @param {object} [opts]\n   * @param {boolean} [opts.useMask] - use drag mask (for prevent cursor changes).\n   * @param {string} [opts.maskCursor] - the cursor for drag mask.\n   */\n  constructor (element, opts) {\n    if (!_dragMask && opts.useMask) {\n      _dragMask = document.createElement('div');\n      _dragMask.classList.add('drag-mask');\n      _dragMask.style.position = 'fixed';\n      _dragMask.style.zIndex = '9999';\n      _dragMask.style.top = '0';\n      _dragMask.style.right = '0';\n      _dragMask.style.bottom = '0';\n      _dragMask.style.left = '0';\n      _dragMask.oncontextmenu = function () { return false; };\n    }\n\n    this._opts = opts;\n    this._element = element || document.body;\n    this._lastTime = 0;\n    this._globalEventInstalled = false;\n\n    // mouse internal states\n    this._pointerLocked = false;\n    this._mouseGrabbed = false;\n\n    this._bcr = element.getBoundingClientRect();\n\n    // the mouse state\n    this._mouse = {\n      x: 0,\n      y: 0,\n      dx: 0,\n      dy: 0,\n      prevX: 0,\n      prevY: 0,\n\n      // mouse wheel (delta)\n      scrollX: 0,\n      scrollY: 0,\n\n      // buttons\n      left: KEY_NONE,\n      right: KEY_NONE,\n      middle: KEY_NONE,\n    };\n\n    // the keyboard state\n    this._keyboard = {\n      // key-name: key-state (0: none, 1: down, 2: press, 3: up)\n    };\n\n    // mousemove\n    this._mousemoveHandle = event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (this._pointerLocked) {\n        this._mouse.x += event.movementX;\n        this._mouse.y += event.movementY;\n      } else {\n        this._mouse.x = event.clientX - this._bcr.left;\n        this._mouse.y = event.clientY - this._bcr.top;\n      }\n    };\n\n    // mousewheel\n    this._mousewheelHandle = event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this._mouse.scrollX = event.deltaX;\n      this._mouse.scrollY = event.deltaY;\n    };\n\n    // mousedown\n    this._mousedownHandle = event => {\n      // NOTE: this will prevent mouse enter the text selection state.\n      event.preventDefault();\n      event.stopPropagation();\n\n      this._installGlobalEvents();\n\n      // handle mouse button\n      switch (event.button) {\n        // left mouse down\n        case 0:\n          this._element.focus();\n\n          // NOTE: do not reset KEY_DOWN when it already pressed\n          if (this._mouse.left !== KEY_PRESSING) {\n            this._mouse.left = KEY_DOWN;\n          }\n          break;\n\n        // middle mouse down\n        case 1:\n          // NOTE: do not reset KEY_DOWN when it already pressed\n          if (this._mouse.middle !== KEY_PRESSING) {\n            this._mouse.middle = KEY_DOWN;\n          }\n          break;\n\n        // right mouse down\n        case 2:\n          // NOTE: do not reset KEY_DOWN when it already pressed\n          if (this._mouse.right !== KEY_PRESSING) {\n            this._mouse.right = KEY_DOWN;\n          }\n          break;\n      }\n    };\n\n    // mouseup\n    this._mouseupHandle = event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      // reset mouse position\n      this._mouse.dx = event.movementX;\n      this._mouse.dy = event.movementY;\n      this._mouse.prevX = this._mouse.x = event.clientX - this._bcr.left;\n      this._mouse.prevX = this._mouse.y = event.clientY - this._bcr.top;\n\n      // handle mouse button\n      switch (event.button) {\n        // left mouse down\n        case 0:\n          this._mouse.left = KEY_UP;\n          break;\n\n        // middle mouse down\n        case 1:\n          this._mouse.middle = KEY_UP;\n          break;\n\n        // right mouse down\n        case 2:\n          this._mouse.right = KEY_UP;\n          break;\n      }\n    };\n\n    // mouseenter\n    this._mouseenterHandle = event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this._mouse.dx = 0.0;\n      this._mouse.dy = 0.0;\n      this._mouse.prevX = this._mouse.x = event.clientX - this._bcr.left;\n      this._mouse.prevX = this._mouse.y = event.clientY - this._bcr.top;\n    };\n\n    // mouseleave\n    this._mouseleaveHandle = event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (this._mouseGrabbed) {\n        return;\n      }\n\n      this._uninstallGlobalEvents();\n\n      this._mouse.dx = event.movementX;\n      this._mouse.dy = event.movementY;\n      this._mouse.prevX = this._mouse.x = event.clientX - this._bcr.left;\n      this._mouse.prevX = this._mouse.y = event.clientY - this._bcr.top;\n    };\n\n    // keydown\n    this._keydownHandle = event => {\n      event.stopPropagation();\n\n      // NOTE: do not reset KEY_DOWN when it already pressed\n      if ( this._keyboard[event.key] !== KEY_PRESSING ) {\n        this._keyboard[event.key] = KEY_DOWN;\n      }\n    };\n\n    // keyup\n    this._keyupHandle = event => {\n      event.stopPropagation();\n\n      this._keyboard[event.key] = KEY_UP;\n    };\n\n    this._registerEvents();\n  }\n\n  _registerEvents () {\n    this._element.addEventListener('mousedown', this._mousedownHandle);\n    this._element.addEventListener('mouseenter', this._mouseenterHandle);\n    this._element.addEventListener('mouseleave', this._mouseleaveHandle);\n    this._element.addEventListener('mousemove', this._mousemoveHandle);\n    this._element.addEventListener('keydown', this._keydownHandle);\n    this._element.addEventListener('keyup', this._keyupHandle);\n  }\n\n  _installGlobalEvents () {\n    if (this._globalEventInstalled) {\n      return;\n    }\n\n    document.addEventListener('mouseup', this._mouseupHandle);\n    document.addEventListener('mousemove', this._mousemoveHandle);\n    document.addEventListener('mousewheel', this._mousewheelHandle, {passive: true});\n\n    if (this._opts.useMask) {\n      _dragMask.style.cursor = this._opts.maskCursor || 'default';\n      document.body.appendChild(_dragMask);\n    }\n\n    this._globalEventInstalled = true;\n  }\n\n  _uninstallGlobalEvents () {\n    if (!this._globalEventInstalled) {\n      return;\n    }\n\n    if (\n      this._mouseGrabbed ||\n      (this._mouse.left !== KEY_NONE && this._mouse.left !== KEY_UP) ||\n      (this._mouse.right !== KEY_NONE && this._mouse.right !== KEY_UP) ||\n      (this._mouse.middle !== KEY_NONE && this._mouse.middle !== KEY_UP)\n    ) {\n      return;\n    }\n\n    document.removeEventListener('mouseup', this._mouseupHandle);\n    document.removeEventListener('mousemove', this._mousemoveHandle);\n    document.removeEventListener('mousewheel', this._mousewheelHandle, { passive: true });\n\n    if (this._opts.useMask) {\n      _dragMask.remove();\n    }\n\n    this._globalEventInstalled = false;\n  }\n\n  destroy () {\n    this._element.removeEventListener('mousedown', this._mousedownHandle);\n    this._element.removeEventListener('mouseenter', this._mouseenterHandle);\n    this._element.removeEventListener('mouseleave', this._mouseleaveHandle);\n    this._element.removeEventListener('mousemove', this._mousemoveHandle);\n    this._element.removeEventListener('keydown', this._keydownHandle);\n    this._element.removeEventListener('keyup', this._keyupHandle);\n\n    this._uninstallGlobalEvents();\n  }\n\n  get mouseX () {\n    return this._mouse.x;\n  }\n\n  get mouseY () {\n    return this._mouse.y;\n  }\n\n  get mouseDeltaX () {\n    return this._mouse.dx;\n  }\n\n  get mouseDeltaY () {\n    return this._mouse.dy;\n  }\n\n  get mouseScrollX () {\n    return this._mouse.scrollX;\n  }\n\n  get mouseScrollY () {\n    return this._mouse.scrollY;\n  }\n\n  /**\n   * @method reset\n   *\n   * Reset the input states.\n   * NOTE: you should call this at the end of your frame.\n   */\n  reset () {\n    // update mouse states\n    this._mouse.prevX = this._mouse.x;\n    this._mouse.prevY = this._mouse.y;\n\n    this._mouse.dx = 0;\n    this._mouse.dy = 0;\n\n    this._mouse.scrollX = 0;\n    this._mouse.scrollY = 0;\n\n    if (this._mouse.left === KEY_DOWN) {\n      this._mouse.left = KEY_PRESSING;\n    } else if (this._mouse.left === KEY_UP) {\n      this._mouse.left = KEY_NONE;\n    }\n\n    if (this._mouse.middle === KEY_DOWN) {\n      this._mouse.middle = KEY_PRESSING;\n    } else if (this._mouse.middle === KEY_UP) {\n      this._mouse.middle = KEY_NONE;\n    }\n\n    if (this._mouse.right === KEY_DOWN) {\n      this._mouse.right = KEY_PRESSING;\n    } else if (this._mouse.right === KEY_UP) {\n      this._mouse.right = KEY_NONE;\n    }\n\n    // update keyboard states\n    for (let name in this._keyboard) {\n      let state = this._keyboard[name];\n      if ( state === KEY_DOWN ) {\n        this._keyboard[name] = KEY_PRESSING;\n      } else if ( state === KEY_UP ) {\n        this._keyboard[name] = KEY_NONE;\n      }\n    }\n\n    // check if uninstall global events\n    this._uninstallGlobalEvents();\n  }\n\n  resize () {\n    this._bcr = this._element.getBoundingClientRect();\n  }\n\n  /**\n   * @method lockMouse\n   * @param {boolean} locked\n   *\n   * try to lock the mouse via `element.requestPointerLock`.\n   */\n  lockMouse (locked) {\n    if (locked) {\n      if (this._pointerLocked) {\n        return;\n      }\n\n      if (this._element.requestPointerLock) {\n        this._element.requestPointerLock();\n        this._pointerLocked = true;\n      }\n\n      return;\n    } else {\n      if (!this._pointerLocked) {\n        return;\n      }\n\n      if (document.exitPointerLock) {\n        document.exitPointerLock();\n        this._pointerLocked = false;\n      }\n    }\n  }\n\n  /**\n   * @method grabMouse\n   * @param {boolean} grabbed\n   *\n   * Keep tracing mouse move event when mouse leave the target element.\n   */\n  grabMouse (grabbed) {\n    this._mouseGrabbed = grabbed;\n\n    if (grabbed) {\n      this._installGlobalEvents();\n    } else {\n      this._uninstallGlobalEvents();\n    }\n  }\n\n  /**\n   * @method mousedown\n   * @param {string} name - 'left', 'right' or 'middle'\n   */\n  mousedown (name) {\n    let btn = this._mouse[name];\n    if (btn !== undefined) {\n      return btn === KEY_DOWN;\n    }\n\n    return false;\n  }\n\n  /**\n   * @method mousepress\n   * @param {string} name - 'left', 'right' or 'middle'\n   */\n  mousepress (name) {\n    let btn = this._mouse[name];\n    if (btn !== undefined) {\n      return btn === KEY_DOWN || btn === KEY_PRESSING;\n    }\n\n    return false;\n  }\n\n  /**\n   * @method mouseup\n   * @param {string} name - 'left', 'right' or 'middle'\n   */\n  mouseup (name) {\n    let btn = this._mouse[name];\n    if (btn !== undefined) {\n      return btn === KEY_UP;\n    }\n\n    return false;\n  }\n\n  /**\n   * @method keydown\n   * @param {string} name\n   */\n  keydown (name) {\n    return this._keyboard[name] === KEY_DOWN;\n  }\n\n  /**\n   * @method keyup\n   * @param {string} name\n   */\n  keyup (name) {\n    return this._keyboard[name] === KEY_UP;\n  }\n\n  /**\n   * @method keypress\n   * @param {string} name\n   */\n  keypress (name) {\n    return this._keyboard[name] === KEY_DOWN ||\n      this._keyboard[name] === KEY_PRESSING;\n  }\n}"],"names":[],"mappings":"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"}